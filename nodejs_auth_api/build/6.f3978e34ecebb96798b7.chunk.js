webpackJsonp([6],{"./app/containers/LoginPage/index.js":function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n("./node_modules/react/react.js"),u=n.n(c),f=n("./node_modules/react-redux/es/index.js"),p=n("./node_modules/react-intl/lib/index.es.js"),d=n("./node_modules/redux-form/immutable.js"),m=Object(p.d)({login:{id:"app.components.LoginForm.login",defaultMessage:"Login"},password:{id:"app.components.LoginForm.password",defaultMessage:"Password"},submit:{id:"app.components.LoginForm.submit",defaultMessage:"Submit"}}),b=n("./node_modules/aphrodite/no-important.js"),y=b.StyleSheet.create({formWrapper:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%"},form:{display:"flex",flexDirection:"column",maxWidth:"500px",marginBottom:"20px"},formRow:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"10px"},formLabel:{width:"100px",marginRight:"20px"},formField:{flex:"1",padding:"3px 5px",background:"#ffffff"},formButton:{padding:"5px 10px",background:"#ffffff",border:"2px solid #000000",borderRadius:"5px"},statusMsg:{display:"flex",flexDirection:"row",justifyContent:"center",color:"#6c6c6c"}}),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},g=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var s in i)void 0===n[s]&&(n[s]=i[s]);else n||(n=i||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),j=function(e){function t(){var e,n,i,a;o(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=i=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.renderField=function(e){var t=e.input,n=e.label,o=e.type;return g("div",{className:Object(b.css)(y.formRow)},void 0,g("label",{className:Object(b.css)(y.formLabel)},void 0,n),u.a.createElement("input",h({},t,{placeholder:n,type:o,className:Object(b.css)(y.formField)})))},a=n,r(i,a)}return i(t,e),v(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.pristine,o=e.submitting;return g("div",{className:Object(b.css)(y.formWrapper)},void 0,g("form",{onSubmit:t,className:Object(b.css)(y.form)},void 0,g(d.Field,{name:"login",component:this.renderField,label:m.login.defaultMessage,type:"text"}),g(d.Field,{name:"password",component:this.renderField,label:m.password.defaultMessage,type:"password"}),g("button",{type:"submit",disabled:n||o,className:Object(b.css)(y.formButton)},void 0,m.submit.defaultMessage)),g("div",{className:Object(b.css)(y.statusMsg)},void 0,this.props.message))}}]),t}(u.a.Component);j=Object(d.reduxForm)({form:"login"})(j);var w=j,O=n("./node_modules/axios/index.js"),x=n.n(O),_=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,o,r){var i=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&i)for(var s in i)void 0===n[s]&&(n[s]=i[s]);else n||(n=i||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:n,_owner:null}}}(),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),P=n("./app/config.js"),M=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.pairsToObject=function(e){var t={};return e.forEach(function(e){t[e[0]]=e[1]}),t},n.handleSubmit=function(e){var t=n.pairsToObject(e._root.entries),o=n.props,r=o.auth,i=o.history;x.a.post(P.host+"/api/auth/login",t,{headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(e){var t=JSON.parse(e.request.response.replace(/\\"/g,'"')),n=t.result[0].accessToken,o=t.result[0].refreshToken;r(n,o),i.push("/")}).catch(function(e){n.setState({responsiveMsg:"Invalid login or password"})})},n.state={responsiveMsg:""},n}return l(t,e),S(t,[{key:"render",value:function(){return _(w,{onSubmit:this.handleSubmit,message:this.state.responsiveMsg})}}]),t}(u.a.PureComponent);t.default=Object(f.connect)(function(e){return{}},function(e){return{auth:function(t,n){e({type:"SUCCESS_AUTH",jwt:t,refresh:n})}}})(M)}});